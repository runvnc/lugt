// Generated by CoffeeScript 1.4.0
(function() {
  var asset, loadwav;

  window.loadini = function() {
    console.log('clicked');
    return now.loadini(function(data) {
      return console.log(JSON.stringify(data));
    });
  };

  asset = null;

  loadwav = function(url) {
    console.log('loading wave');
    $.get(url);
    asset = Asset.fromURL(url);
    asset.get('duration', function(duration) {
      return console.log('duration is ' + duration);
    });
    asset.on('decodeStart', function() {
      var list;
      console.log('decodestart');
      list = new BufferList;
      asset.on('data', function(buffer) {
        var buf;
        console.log('received some data');
        buf = new Buffer(buffer);
        list.push(buf);
        console.log(buf);
        return asset.decoder.readChunk();
      });
      return asset.decoder.readChunk();
    });
    console.log('starting');
    return asset.start();
  };

  $(function() {
    $('#load').click(function() {
      return window.loadini();
    });
    return loadwav('korg.wav');
  });

}).call(this);
